var BrowserLocation=function(){"use strict";var e=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},o=function(){function o(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),t}}(),r=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},i=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},c=function(){function n(t){e(this,n),this.opts=t}return o(n,[{key:"type",get:function(){return this.opts.type}},{key:"options",get:function(){return this.opts},set:function(t){this.opts=t}}]),n}(),t=function(t){function n(){return e(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return r(n,c),o(n,[{key:"start",value:function(){return new Promise(function(n,e){navigator.geolocation.getCurrentPosition(function(t){n({latitude:t.coords.latitude,longitude:t.coords.longitude})},function(t){e(t)})})}},{key:"stop",value:function(){}},{key:"h5",get:function(){return!0}},{key:"wxh5",get:function(){return!0}}]),n}(),u=window.wx,n=function(t){function n(){return e(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return r(n,c),o(n,[{key:"start",value:function(){var t=this.type;return new Promise(function(n,e){u.getLocation({type:t,success:function(t){n(t)},fail:function(t){e(t)}})})}},{key:"stop",value:function(){}},{key:"check",value:function(){return new Promise(function(n,e){u.checkJsApi({jsApiList:["getLocation"],success:function(t){console.info("checkJsApi.getLocation",t),n()},fail:function(t){console.error(t),e(Error("getLocation接口添加到jsApiList数组中"))}})})}},{key:"wxh5",get:function(){return!0}}]),n}(),s={location:null,options:{maximumAge:3e4,timeout:27e3,type:"wgs84"},isready:!1,ready:function(t){t&&t()}},a=-1<window.navigator.userAgent.indexOf("MicroMessenger");"geolocation"in navigator&&!a?(s.location=new t(s.options),s.isready=!0):a&&(s.ready=function(t){if(!window.wx)throw Error("引入wx jssdk");s.isready||(s.location=new n(s.options),s.location.check().then(function(){s.isready=!0,t&&t()}))});return["start"].forEach(function(t){Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get:function(){if(!s.isready)throw Error("no ready");return s.location[t]}})}),s}();
